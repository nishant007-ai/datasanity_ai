<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Magical Surprise for Suii ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* ==================================== */
        /* SECTION I: GLOBAL & CINEMATIC STYLES */
        /* ==================================== */

        :root {
            --color-pink: #ff69b4; /* Deep Pink */
            --color-purple: #8a2be2; /* Blue Violet */
            --color-gold: #ffd700; /* Gold */
            --bg-dark: #0a0a0a;
            --gradient-magic: linear-gradient(135deg, var(--color-purple) 0%, var(--color-pink) 100%);
            --font-family: 'Poppins', sans-serif;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden; 
            font-family: var(--font-family);
            background-color: var(--bg-dark);
            color: white;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
        }

        .scene-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 5px; /* Subtle radius */
        }

        /* --- Scene Transitions & Layout --- */

        .scene {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.5s ease-in-out;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }

        .scene.active {
            opacity: 1;
            pointer-events: auto;
            z-index: 10;
        }

        /* --- Global Components --- */

        /* Pulsing/Glowing Button Style (Premium Look) */
        .glowing-button {
            background: var(--gradient-magic);
            border: none;
            padding: 15px 30px;
            font-size: 1.5em;
            font-weight: bold;
            color: var(--bg-dark);
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 20px var(--color-pink);
            transition: transform 0.3s ease, background 0.5s;
            animation: pulse 2s infinite;
        }

        .glowing-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px var(--color-gold);
        }

        .glowing-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            animation: none;
            transform: scale(1);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 10px var(--color-pink), 0 0 10px var(--color-purple); }
            50% { box-shadow: 0 0 25px var(--color-pink), 0 0 25px var(--color-purple); }
            100% { box-shadow: 0 0 10px var(--color-pink), 0 0 10px var(--color-purple); }
        }
        
        /* Glowing Animated Borders */
        .scene-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 6px solid transparent;
            border-image: linear-gradient(45deg, var(--color-gold), var(--color-purple), var(--color-pink), var(--color-gold)) 1;
            animation: border-glow 5s infinite alternate;
            pointer-events: none;
            z-index: 999;
        }

        @keyframes border-glow {
            0% { opacity: 0.5; border-image-source: linear-gradient(45deg, var(--color-gold), var(--color-purple)); }
            50% { opacity: 1; border-image-source: linear-gradient(135deg, var(--color-pink), var(--color-gold)); }
            100% { opacity: 0.5; border-image-source: linear-gradient(225deg, var(--color-purple), var(--color-pink)); }
        }

        /* ==================================== */
        /* SECTION II: SCENE-SPECIFIC STYLES */
        /* ==================================== */

        /* 1. INTRO SCENE */
        #introText {
            font-size: 4em;
            font-weight: 900;
            letter-spacing: 5px;
        }
        @keyframes glowingText {
            0% { color: #555; text-shadow: none; }
            100% { color: white; text-shadow: 0 0 5px var(--color-pink), 0 0 10px var(--color-purple), 0 0 15px var(--color-pink); }
        }

        /* 2. QUIZ SCENE */
        .quiz-option-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid var(--color-purple);
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }
        .quiz-option-btn:hover {
            background: var(--color-pink);
            transform: scale(1.05);
            box-shadow: 0 0 10px var(--color-pink);
        }

        /* 3. REVEAL SCENE */
        @keyframes rotate3D {
            0% { transform: rotateY(0deg) scale(1); }
            50% { transform: rotateY(180deg) scale(1.05); }
            100% { transform: rotateY(360deg) scale(1); }
        }
        #cakeImage {
            animation: rotate3D 5s infinite linear; 
            border-radius: 50%; 
            box-shadow: 0 0 50px var(--color-pink);
        }
        #cakeLoader p {
            font-weight: bold;
            text-shadow: 0 0 5px var(--color-pink);
        }

        /* 5. FINAL SCENE */
        .reveal-photo {
            width: 200px; 
            height: 200px; 
            object-fit: cover; 
            border-radius: 10px; 
            filter: brightness(1.1);
        }
        .neon-heart {
            position: absolute;
            width: 250px;
            height: 250px;
            background-color: transparent;
            border: 4px solid var(--color-pink);
            box-shadow: 0 0 15px var(--color-pink), 0 0 30px var(--color-purple), 0 0 5px var(--color-gold) inset;
            border-radius: 50%; /* For initial look, JS will handle complex clip-path for heart shape */
            animation: heartbeat 1.5s infinite;
            z-index: 5;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1.1);
        }
        @keyframes heartbeat {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
            50% { transform: translate(-50%, -50%) scale(1.15); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
        }
        
        /* Final Text Styles */
        #typewriter-line1 {
            text-shadow: 0 0 10px var(--color-gold), 0 0 20px var(--color-pink);
            font-weight: 900;
        }
        #typewriter-line2 {
            font-style: italic;
            color: #ccc;
        }
        
        /* Extra Feature Buttons */
        .mini-btn {
            padding: 10px 15px;
            font-size: 1em;
            color: white;
            background: linear-gradient(90deg, #5e0094, #ff005d);
            border: 1px solid var(--color-gold);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

    </style>
</head>
<body>
    <div class="scene-container">
        <canvas id="magicCanvas" style="position: absolute; top: 0; left: 0; z-index: 1;"></canvas>
        
        <audio id="ambient-sound" src="placeholder/romantic_ambient_sound.mp3" loop></audio>

        <div id="introScene" class="scene active" style="z-index: 20;">
            <h1 id="introText" style="opacity: 0; animation: glowingText 3s forwards 1s, fadeIn 2s forwards;">
                A Special Surprise Awaits Suii...
            </h1>
            <button id="startButton" class="glowing-button" style="margin-top: 50px; opacity: 0; animation: fadeIn 1s forwards 4s;">
                Start Magic ‚ú®
            </button>
        </div>

        <div id="quizScene" class="scene" style="z-index: 30;">
            <div id="quiz-flow" style="text-align: center; max-width: 600px; width: 90%;">
                </div>
        </div>

        <div id="revealScene" class="scene" style="z-index: 40; background: rgba(0,0,0,0.8);">
            <div id="cakeLoader" style="text-align: center;">
                <img id="cakeImage" src="placeholder/3d_rotating_cake.png" alt="3D Rotating Cake" style="width: 250px; height: 250px;">
                <p style="font-size: 1.5em; color: var(--color-pink); margin-top: 30px;">
                    Baking Suii‚Äôs Surprise Cake...
                </p>
            </div>
        </div>

        <div id="gamesScene" class="scene" style="z-index: 50;">
            <h2 style="color: var(--color-gold); text-shadow: 0 0 10px var(--color-gold);">üéÅ Time for some Fun! üéØ</h2>
            <div id="game-area" style="margin-top: 30px; display: flex; flex-direction: column; align-items: center; gap: 30px; width: 100%;">
                </div>
        </div>

        <div id="finalScene" class="scene" style="z-index: 60; background: radial-gradient(circle, rgba(138, 43, 226, 0.4) 0%, rgba(255, 105, 180, 0.4) 100%);">
            <div id="final-content" style="text-align: center;">
                <div style="display: flex; gap: 50px; justify-content: center; align-items: center; margin-bottom: 50px; position: relative;">
                    <img id="nishant-img" src="placeholder/nishant_image.jpg" alt="Nishant" class="reveal-photo">
                    <div class="neon-heart"></div> <img id="suhani-img" src="placeholder/suhani_image.jpg" alt="Suhani (Suii)" class="reveal-photo">
                </div>

                <h1 id="typewriter-line1" style="font-size: 2.5em; color: var(--color-gold); margin-bottom: 10px;"></h1>
                <h2 id="typewriter-line2" style="font-size: 1.8em; color: white;"></h2>
                
                <div id="wishes-container" style="margin-top: 30px;">
                    <p id="current-wish" style="font-size: 1.2em; color: var(--color-pink); font-style: italic;"></p>
                    <button id="next-wish-btn" class="glowing-button mini-btn" style="margin-top: 10px; display: none;">View Next Wish ‚Üí</button>
                </div>

                <div id="extra-features" style="margin-top: 50px; display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
                    <button class="glowing-button mini-btn">üñºÔ∏è Upload Custom Images</button>
                    <button class="glowing-button mini-btn">‚¨áÔ∏è Download Poster</button>
                    <button class="glowing-button mini-btn" id="whatsapp-share">üì± Share to Suii</button>
                </div>
            </div>
        </div>
        </div>

    <script>
        /* ==================================== */
        /* SECTION III: JAVASCRIPT LOGIC */
        /* ==================================== */

        // --- Core Setup ---
        const scenes = {
            intro: document.getElementById('introScene'),
            quiz: document.getElementById('quizScene'),
            reveal: document.getElementById('revealScene'),
            games: document.getElementById('gamesScene'),
            final: document.getElementById('finalScene')
        };
        const startButton = document.getElementById('startButton');
        const ambientSound = document.getElementById('ambient-sound');
        const quizFlow = document.getElementById('quiz-flow');
        
        let currentScene = 'intro';

        // Helper function for smooth scene transitions
        function changeScene(newSceneId) {
            scenes[currentScene].classList.remove('active');
            currentScene = newSceneId;
            scenes[currentScene].classList.add('active');
        }

        // --- ‚≠ê 1. INTRO SCENE LOGIC ---
        startButton.addEventListener('click', () => {
            ambientSound.play().catch(e => console.log("Audio autoplay prevented. User must interact."));
            changeScene('quiz');
            startQuizFlow();
            startCanvasMagic('fireflies');
        });

        // --- ‚≠ê 2. MULTI-STEP QUIZ + PASSWORD FLOW LOGIC ---

        const quizQuestions = [
            { q: "What is your name?", inputId: "q1_name", correct: "Suhani", skipCheck: true },
            { q: "What is your pet name?", inputId: "q2_petname", correct: "Suii", skipCheck: true },
            { q: "When is your birthday? (DD/MM/YYYY)", inputId: "q3_bday", correct: "01/12/2000", skipCheck: true }, // IMPORTANT: Change this date
            { q: "What is your favourite color?", inputId: "q4_color", correct: "Pink", skipCheck: true },
            { q: "What is your favourite food?", inputId: "q5_food", correct: "Pizza", skipCheck: true },
            { 
                q: "Who is your best friend?", 
                inputId: "q6_bestfriend", 
                correct: ["Nishu", "Nishant", "Nishu bro", "Nishu bhau", "Nishant Patil"], 
                skipCheck: false 
            }
        ];
        let currentQuestionIndex = 0;

        function startQuizFlow() {
            currentQuestionIndex = 0;
            displayQuestion();
        }

        function displayQuestion() {
            if (currentQuestionIndex >= quizQuestions.length) {
                changeScene('reveal');
                startRevealSequence();
                return;
            }

            const qData = quizQuestions[currentQuestionIndex];
            const isLast = currentQuestionIndex === quizQuestions.length - 1;

            quizFlow.style.opacity = '0';
            setTimeout(() => {
                quizFlow.innerHTML = `
                    <h2 style="color: var(--color-pink); margin-bottom: 30px; font-size: 2em;">${qData.q}</h2>
                    <input type="text" id="${qData.inputId}" placeholder="Type your answer here..." style="padding: 15px; font-size: 1.2em; border-radius: 10px; border: 2px solid var(--color-purple); background: rgba(255, 255, 255, 0.1); color: white; width: 80%; max-width: 400px; text-align: center; margin-bottom: 20px;">
                    
                    ${isLast ? `
                        <p style="margin-top: 10px; color: #aaa; font-style: italic;">(Hint: Choose the correct one below if you forget!)</p>
                        <div id="quiz-options" style="margin-top: 20px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;">
                            ${qData.correct.map(opt => `<button class="quiz-option-btn">${opt}</button>`).join('')}
                        </div>
                    ` : ''}
                    
                    <button id="next-q-btn" class="glowing-button" style="margin-top: 30px;">Next Step ‚Üí</button>
                    <p id="quiz-error" style="color: red; margin-top: 20px; display: none; font-weight: bold; background: rgba(255, 0, 0, 0.1); padding: 5px; border-radius: 5px;">
                        Arre arre‚Ä¶ wrong answer üò≠ Try again!
                    </p>
                `;

                const nextBtn = document.getElementById('next-q-btn');
                const inputField = document.getElementById(qData.inputId);

                if (isLast) {
                    document.querySelectorAll('.quiz-option-btn').forEach(button => {
                        button.addEventListener('click', (e) => {
                            inputField.value = e.target.textContent;
                            validateAnswer(inputField, qData, nextBtn);
                        });
                    });
                    nextBtn.addEventListener('click', () => validateAnswer(inputField, qData, nextBtn));
                } else {
                    nextBtn.addEventListener('click', () => {
                        currentQuestionIndex++;
                        displayQuestion();
                    });
                }
                
                // Allow pressing Enter to proceed for non-password questions
                inputField.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        if (qData.skipCheck) {
                            currentQuestionIndex++;
                            displayQuestion();
                        } else {
                            validateAnswer(inputField, qData, nextBtn);
                        }
                    }
                });

                quizFlow.style.opacity = '1';
            }, 500);
        }

        function validateAnswer(inputField, qData, nextBtn) {
            const errorElement = document.getElementById('quiz-error');
            const answer = inputField.value.trim();

            if (qData.skipCheck) {
                // Should not happen as next logic handles skip check, but for safety
                currentQuestionIndex++;
                displayQuestion();
                return;
            }

            if (qData.correct.map(c => c.toLowerCase()).includes(answer.toLowerCase())) {
                errorElement.style.display = 'none';
                nextBtn.disabled = true;
                nextBtn.textContent = 'Correct! Loading...';
                setTimeout(() => {
                    currentQuestionIndex++;
                    displayQuestion();
                }, 1000);
            } else {
                errorElement.style.display = 'block';
                inputField.value = '';
            }
        }

        // --- ‚≠ê 3. MASSIVE SUSPENSE REVEAL SEQUENCE LOGIC ---

        function startRevealSequence() {
            // Cake Loading (5 seconds)
            document.getElementById('cakeLoader').style.display = 'block';
            startCanvasMagic('cake-smoke'); // Start smoke effect on canvas

            setTimeout(() => {
                // Cartoon Heart Explosion + Balloon Rise + Fireworks + Heart Rain (5 seconds)
                document.getElementById('cakeLoader').style.display = 'none';
                startCanvasMagic('hearts-balloons-fireworks');
            }, 5000);

            setTimeout(() => {
                changeScene('games');
                initMiniGames();
            }, 10000); // Total 10s of intense reveal fanfare
        }

        // --- ‚≠ê 4. MINI-GAMES LOGIC ---

        let gamesCompleted = 0;

        function initMiniGames() {
            const gameArea = document.getElementById('game-area');
            gamesCompleted = 0; // Reset counter

            // Game 1: Choose a Gift
            gameArea.innerHTML = `
                <div id="game1-container" class="game-container" style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 15px; width: 90%; max-width: 500px; box-shadow: 0 0 15px rgba(255, 105, 180, 0.5);">
                    <h3>üéÅ Game 1: Choose a Magical Gift!</h3>
                    <div id="gift-options" style="display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; margin-top: 20px;">
                        <button class="glowing-button game-btn mini-btn" data-gift="teddy">üß∏ Teddy</button>
                        <button class="glowing-button game-btn mini-btn" data-gift="rose">üåπ Rose</button>
                        <button class="glowing-button game-btn mini-btn" data-gift="ring">üíç Ring</button>
                        <button class="glowing-button game-btn mini-btn" data-gift="chocolate">üç´ Chocolate</button>
                        <button class="glowing-button game-btn mini-btn" data-gift="headphones">üéß Phones</button>
                    </div>
                    <p id="gift-result" style="margin-top: 20px; font-weight: bold; color: var(--color-pink); height: 30px;"></p>
                </div>
                
                <div id="game2-container" class="game-container" style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 15px; width: 90%; max-width: 500px; box-shadow: 0 0 15px rgba(138, 43, 226, 0.5);">
                    <h3>üéØ Game 2: Pop the Hearts! (Tap 10 hearts)</h3>
                    <p id="heart-count">Hearts Popped: 0 / 10</p>
                    <button id="start-pop-game" class="glowing-button mini-btn">Start Popping!</button>
                    <div id="pop-area" style="height: 150px; border: 2px dashed #8a2be2; margin-top: 10px; position: relative; overflow: hidden; display: none;">
                        </div>
                </div>

                <div id="game3-container" class="game-container" style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 15px; width: 90%; max-width: 500px; box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);">
                    <h3>üé≠ Game 3: Guess the Emoji!</h3>
                    <p style="font-size: 3em; margin: 10px 0;">‚ú®üëëüòá</p>
                    <input type="text" id="emoji-guess" placeholder="What does this represent?" style="padding: 10px; border-radius: 5px; width: 80%; text-align: center; margin-bottom: 10px;">
                    <button id="check-emoji-btn" class="glowing-button mini-btn">Guess!</button>
                    <p id="emoji-result" style="margin-top: 10px; font-weight: bold; color: var(--color-pink); height: 30px;"></p>
                </div>

                <button id="finish-games-btn" class="glowing-button" style="margin-top: 40px; display: none;">See Final Surprise! ‚ù§Ô∏è</button>
            `;

            // Game 1 Logic
            document.querySelectorAll('#gift-options .game-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    if (gamesCompleted < 100) { // Check if game is not already completed
                        const gift = e.target.getAttribute('data-gift');
                        const results = {
                            teddy: "A huggable surprise! So cute! üêª",
                            rose: "A symbol of eternal love and respect! üíï",
                            ring: "A promise of friendship forever! ‚ú®",
                            chocolate: "Sweetest treat for the sweetest person! üç´",
                            headphones: "For enjoying your favourite tunes! üé∂"
                        };
                        document.getElementById('gift-result').innerHTML = results[gift] + " **(Game 1 Complete!)**";
                        document.getElementById('gift-options').style.pointerEvents = 'none';
                        gamesCompleted += 100; // Use a large number to mark complete
                        checkGameCompletion();
                    }
                });
            });

            // Game 2 Logic (Interactive Heart Popping) - Simplified placeholder
            let heartsPopped = 0;
            document.getElementById('start-pop-game').addEventListener('click', () => {
                document.getElementById('pop-area').style.display = 'block';
                document.getElementById('start-pop-game').style.display = 'none';
                
                // Logic to generate 10 hearts (Divs with click handlers)
                const popArea = document.getElementById('pop-area');
                for (let i = 0; i < 10; i++) {
                    const heart = document.createElement('div');
                    heart.className = 'floating-heart';
                    heart.style.cssText = `
                        position: absolute; width: 30px; height: 30px; border-radius: 50%; 
                        background: var(--color-pink); cursor: pointer;
                        left: ${Math.random() * 80 + 10}%; top: ${Math.random() * 80 + 10}%;
                        box-shadow: 0 0 5px var(--color-pink);
                        animation: heartFloat 3s infinite alternate ease-in-out;
                    `;
                    // CSS Keyframe required: @keyframes heartFloat { 0% { transform: translateY(0); } 100% { transform: translateY(-10px); } }

                    heart.addEventListener('click', () => {
                        if (heart.style.opacity !== '0') {
                            heart.style.opacity = '0';
                            heart.style.transform = 'scale(2)';
                            heart.style.transition = 'all 0.3s';
                            heartsPopped++;
                            document.getElementById('heart-count').textContent = `Hearts Popped: ${heartsPopped} / 10`;
                            if (heartsPopped === 10) {
                                gamesCompleted += 100;
                                checkGameCompletion();
                                document.getElementById('heart-count').textContent = `Hearts Popped: 10 / 10! **(Game 2 Complete!)**`;
                            }
                        }
                    });
                    popArea.appendChild(heart);
                }
            });

            // Game 3 Logic
            document.getElementById('check-emoji-btn').addEventListener('click', () => {
                const guess = document.getElementById('emoji-guess').value.trim().toLowerCase();
                const correctAnswers = ["suhani", "suii", "princess"];
                const resultElement = document.getElementById('emoji-result');

                if (correctAnswers.includes(guess) && gamesCompleted < 200) {
                    resultElement.innerHTML = "That's right! You are my **‚ú®üëëüòá**! **(Game 3 Complete!)**";
                    gamesCompleted += 100;
                    checkGameCompletion();
                } else if (gamesCompleted >= 200) {
                     resultElement.textContent = "You already got it! Go to the final reveal! üéâ";
                } else {
                    resultElement.textContent = "Oops! Try thinking about yourself... try again!";
                }
            });
            
            // General Game Completion Check
            function checkGameCompletion() {
                if (gamesCompleted >= 300) { // 100 per game
                    document.getElementById('finish-games-btn').style.display = 'block';
                }
            }

            document.getElementById('finish-games-btn').addEventListener('click', () => {
                changeScene('final');
                startFinalReveal();
            });
        }

        // --- ‚≠ê 5. FINAL REVEAL LOGIC ---
        const birthdayWishes = [
            "You're the magic in my everyday, the heartbeat in my story, and the most precious chapter in my life. ‚ù§Ô∏è",
            "Wishing you a year filled with the same unconditional love, respect, and boundless happiness you give to me. Always and forever, Nishu.",
            "I hope today feels as cinematic and magical as you make my life feel. You are a masterpiece, Suii. ‚ú®",
            "On your special day, may all the glitter and gold from this magical realm we've created rain down on you. Dream big!",
            "Cheers to the girl who's as sweet as chocolate, as bold as a heart explosion, and as reliable as a Nishu promise. Have the absolute best day! ü•≥"
        ];
        let currentWishIndex = 0;

        function startFinalReveal() {
            // Stop intense fanfare, start soft heart rain/floating lights
            startCanvasMagic('heart-rain-lights');

            // Typewriter effect function
            function typeWriter(element, text, speed, callback) {
                let i = 0;
                element.innerHTML = '';
                function typing() {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i).replace('\n', '<br>');
                        i++;
                        setTimeout(typing, speed);
                    } else if (callback) {
                        callback();
                    }
                }
                typing();
            }
            
            // Text to display
            const text1 = "Happy Birthday My Best Friend Suii ‚ù§Ô∏è\n\n You are the most special person in my life.";
            const text2 = "From: Nishu ‚ù§Ô∏è With Love & Respect Always.";

            const line1 = document.getElementById('typewriter-line1');
            const line2 = document.getElementById('typewriter-line2');
            
            typeWriter(line1, text1, 70, () => {
                triggerConfetti(); 
                setTimeout(() => {
                    typeWriter(line2, text2, 50, () => {
                        triggerConfetti();
                        displayWishes();
                    });
                }, 500);
            });
        }
        
        // Wish Display Logic
        function displayWishes() {
            const wishElement = document.getElementById('current-wish');
            const nextBtn = document.getElementById('next-wish-btn');
            
            currentWishIndex = 0;
            wishElement.textContent = birthdayWishes[currentWishIndex];
            nextBtn.style.display = 'inline-block';

            nextBtn.addEventListener('click', () => {
                currentWishIndex = (currentWishIndex + 1) % birthdayWishes.length;
                wishElement.textContent = birthdayWishes[currentWishIndex];
                if (currentWishIndex === birthdayWishes.length - 1) {
                    nextBtn.textContent = 'View First Wish Again';
                } else {
                    nextBtn.textContent = 'View Next Wish ‚Üí';
                }
            });
        }


        // --- ‚≠ê 6. EXTRA ADVANCED FEATURES ---
        
        document.getElementById('whatsapp-share').addEventListener('click', () => {
            // IMPORTANT: Replace the placeholder link with your actual website URL
            const shareLink = "https://yourwebsite.com/suhani_birthday"; 
            const message = encodeURIComponent(`Hey Suii, I have a magical birthday surprise waiting for you! Open this link right now: ${shareLink} üéâüéÅ`);
            window.open(`https://wa.me/?text=${message}`, '_blank');
        });

        // --- CANVAS MAGIC (Particle System Framework) ---
        
        const canvas = document.getElementById('magicCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let canvasAnimationId;
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        function startCanvasMagic(effect) {
            cancelAnimationFrame(canvasAnimationId);
            particles = [];
            
            if (effect === 'fireflies' || effect === 'heart-rain-lights') {
                for (let i = 0; i < 50; i++) particles.push(new Firefly());
                if (effect === 'heart-rain-lights') {
                    for (let i = 0; i < 100; i++) particles.push(new HeartRainDrop());
                }
                animateCanvas();
            } else if (effect === 'cake-smoke') {
                // Logic for pink smoke emanating from the bottom of the cake image
                for (let i = 0; i < 20; i++) particles.push(new SmokeParticle());
                animateCanvas();
            } else if (effect === 'hearts-balloons-fireworks') {
                // Intense particle creation for 5 seconds
                for (let i = 0; i < 30; i++) particles.push(new CartoonHeart());
                for (let i = 0; i < 20; i++) particles.push(new Balloon());
                animateCanvas();
            }
        }

        // --- PARTICLE CLASSES (Implement drawing logic here) ---
        // NOTE: These are FRAMEWORKS. You need to implement the detailed physics for a hyper-cinematic look.

        class Firefly {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2 + 1;
                this.speedX = (Math.random() - 0.5) * 0.2;
                this.speedY = (Math.random() - 0.5) * 0.2;
                this.opacity = Math.random();
            }
            update() {
                this.x += this.speedX + Math.sin(Date.now() * 0.001) * 0.5;
                this.y += this.speedY + Math.cos(Date.now() * 0.001) * 0.5;
                this.opacity = Math.abs(Math.sin(Date.now() * 0.0005 + this.x * 0.01)) * 0.8;
                if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
            }
            draw() {
                ctx.fillStyle = `rgba(255, 215, 0, ${this.opacity})`; // Gold/Firefly color
                ctx.shadowColor = 'yellow';
                ctx.shadowBlur = 5;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
            }
        }
        
        class HeartRainDrop {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = -Math.random() * canvas.height;
                this.speed = Math.random() * 1.5 + 0.5;
                this.size = Math.random() * 10 + 5;
                this.color = `rgba(255, 105, 180, ${Math.random() * 0.5 + 0.3})`;
            }
            update() {
                this.y += this.speed;
                if (this.y > canvas.height) this.y = -this.size;
            }
            draw() {
                // Drawing a heart shape requires B√©zier curves. Using a simple dot/square placeholder:
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, this.size, this.size);
            }
        }
        
        class SmokeParticle { /* ... pink smoke rising animation logic ... */ }
        class CartoonHeart { /* ... exploding/popping heart animation logic ... */ }
        class Balloon { /* ... rising balloon animation logic in pink/purple/gold ... */ }
        class Firework { /* ... firework explosion logic ... */ }


        // Main animation loop
        function animateCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Subtle dark background gradient for depth
            const gradient = ctx.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);
            gradient.addColorStop(0, 'rgba(10, 10, 10, 0.1)');
            gradient.addColorStop(1, 'rgba(10, 10, 10, 0.8)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Update and draw all particles
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            
            canvasAnimationId = requestAnimationFrame(animateCanvas);
        }

        // Confetti Burst Effect
        function triggerConfetti() {
            // This is a simple visual burst, not a full canvas confetti engine
            for (let i = 0; i < 50; i++) {
                const flake = document.createElement('div');
                flake.style.cssText = `
                    position: fixed; 
                    width: 8px; 
                    height: 8px; 
                    background: ${['#ff69b4', '#ffd700', '#8a2be2'][Math.floor(Math.random() * 3)]};
                    top: ${Math.random() * 10}vh;
                    left: ${Math.random() * 100}vw;
                    transform: rotate(${Math.random() * 360}deg);
                    animation: confettiFall 3s forwards ease-in;
                    opacity: 0;
                    z-index: 10000;
                `;
                document.body.appendChild(flake);
                // Add required CSS keyframe if not already present
                if (!document.querySelector('style').innerHTML.includes('confettiFall')) {
                    const style = document.createElement('style');
                    style.innerHTML += `@keyframes confettiFall { 0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }`;
                    document.head.appendChild(style);
                }
                setTimeout(() => flake.remove(), 4000);
            }
        }

        // Start the initial firefly effect
        startCanvasMagic('fireflies');

    </script>
</body>
</html>